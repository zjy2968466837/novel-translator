# ğŸ“– Novel Translator â€” æ—¥æ–‡è½»å°è¯´ AI ç¿»è¯‘å™¨

å°†æ—¥æ–‡è½»å°è¯´ï¼ˆEPUB æ ¼å¼ï¼‰ç¿»è¯‘ä¸ºæµç•…åœ°é“çš„ä¸­æ–‡ï¼Œæ”¯æŒ **å‘½ä»¤è¡Œ** ä¸ **å›¾å½¢ç•Œé¢** åŒæ¨¡å¼ã€‚

åŸºäº OpenAI å…¼å®¹ APIï¼ˆDeepSeek / Qwen / GPT ç­‰ï¼‰ï¼Œå†…ç½®é’ˆå¯¹è½»å°è¯´ç¿»è¯‘æ·±åº¦è°ƒä¼˜çš„æç¤ºè¯ç³»ç»Ÿã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ“— EPUB è§£æ | è‡ªåŠ¨æå–ç« èŠ‚ã€æ’åºã€æ¸…æ´— HTML |
| ğŸ”„ åŒæ¨¡å‹æ”¯æŒ | Chat æ¨¡å‹ + Completion æ¨¡å‹è‡ªåŠ¨æ£€æµ‹ |
| ğŸ“‹ æ•´ç« ç¿»è¯‘ | å¯é€‰å°†æ•´ç« ä½œä¸ºä¸€ä¸ªæ•´ä½“å‘é€ï¼Œæ¶ˆé™¤è·¨åˆ†å—ä¸ä¸€è‡´ |
| ğŸ”— ä¸Šä¸‹æ–‡æ³¨å…¥ | å°†å‰æ–‡ç¿»è¯‘ç»“æœæ³¨å…¥åç»­è¯·æ±‚ï¼Œä¿æŒäººåæœ¯è¯­ä¸€è‡´ |
| âš¡ å¹¶å‘ç¿»è¯‘ | å¤šçº¿ç¨‹å¹¶å‘åŠ é€Ÿï¼Œæ”¯æŒ 1~128 çº¿ç¨‹ |
| ğŸ’¾ æ–­ç‚¹ç»­ä¼  | å®æ—¶ä¿å­˜è¿›åº¦ï¼Œä¸­æ–­åè‡ªåŠ¨è·³è¿‡å·²å®Œæˆç« èŠ‚ |
| ğŸ“– æœ¯è¯­è¡¨ | JSON æ ¼å¼æœ¯è¯­è¡¨ï¼Œå¼ºåˆ¶ç»Ÿä¸€ä¸“æœ‰åè¯è¯‘å |
| ğŸ“¦ åŒæ ¼å¼è¾“å‡º | æ”¯æŒ TXT çº¯æ–‡æœ¬ å’Œ EPUB ç”µå­ä¹¦è¾“å‡º |
| ğŸ¨ GUI ç•Œé¢ | åŸºäº Flet çš„ç°ä»£å›¾å½¢ç•Œé¢ï¼Œæ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªé€‚åº” |
| ğŸ”§ ç¿»è¯‘ä¿®å¤ | è´¨é‡æ‰«æ + é€‰æ‹©æ€§é‡ç¿»ï¼Œä¿®å¤ä¸ä¸€è‡´çš„è¯‘å |


---

## ï¿½ å¿«é€Ÿå¼€å§‹ï¼ˆå…å®‰è£…ï¼‰

**Windows ç”¨æˆ·** å¯ç›´æ¥ä¸‹è½½å¼€ç®±å³ç”¨çš„å‘è¡ŒåŒ…ï¼Œæ— éœ€å®‰è£… Python æˆ–ä»»ä½•ä¾èµ–ï¼š

1. å‰å¾€ [Releases](https://github.com/zjy2968466837/novel-translator/releases) é¡µé¢
2. ä¸‹è½½æœ€æ–°çš„ `NovelTranslator-v3.0.0-win-x64.zip`ï¼ˆçº¦ 57 MBï¼‰
3. è§£å‹åˆ°ä»»æ„ç›®å½•
4. åŒå‡» `NovelTranslator.exe` å³å¯å¯åŠ¨ GUI

> ğŸ’¡ é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦æ•°ç§’åŠ è½½ï¼Œè¯·è€å¿ƒç­‰å¾…çª—å£å‡ºç°ã€‚
> 
> ğŸ“‹ è§£å‹ç›®å½•ä¸‹é™„å¸¦äº† `glossary_example.json` ç¤ºä¾‹æœ¯è¯­è¡¨ä¾›å‚è€ƒã€‚

---

## ğŸ“¦ ä»æºç å®‰è£…

### ç¯å¢ƒè¦æ±‚

- Python â‰¥ 3.10
- ä¸€ä¸ª OpenAI å…¼å®¹çš„ API Keyï¼ˆæ¨è [ç¡…åŸºæµåŠ¨ SiliconFlow](https://siliconflow.cn/)ï¼‰

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/zjy2968466837/novel-translator.git
cd novel-translator

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS / Linux
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–ä»¥åŒ…æ¨¡å¼å®‰è£…ï¼ˆæ”¯æŒ novel-translator å‘½ä»¤ï¼‰
pip install -e .
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### GUI æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
python -m novel_translator gui
```

å¯åŠ¨åå³å¯åœ¨å›¾å½¢ç•Œé¢ä¸­ï¼š
1. å¡«å…¥ API Key å’Œé€‰æ‹©æ¨¡å‹
2. é€‰æ‹©è¾“å…¥ EPUB æ–‡ä»¶
3. é…ç½®ç¿»è¯‘é£æ ¼å’Œå‚æ•°
4. ç‚¹å‡»ã€Œå¼€å§‹ç¿»è¯‘ã€

### CLI æ¨¡å¼

```bash
python -m novel_translator translate input.epub \
  --api-key sk-your-api-key \
  --model deepseek-ai/DeepSeek-V3.2 \
  --format epub \
  --glossary glossary.json \
  --chunk-size 0 \
  --context-lines 5
```

#### å¸¸ç”¨å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--api-key` | API Keyï¼ˆå¿…å¡«ï¼‰ | â€” |
| `--base-url` | API åœ°å€ | `https://api.siliconflow.cn/v1` |
| `--model` | æ¨¡å‹åç§° | `deepseek-ai/DeepSeek-V3.2` |
| `--format` | è¾“å‡ºæ ¼å¼ `txt`/`epub` | `txt` |
| `--glossary` | æœ¯è¯­è¡¨ JSON è·¯å¾„ | â€” |
| `--chunk-size` | åˆ†å—å­—ç¬¦æ•°ï¼ˆ0=æ•´ç« ï¼‰ | `1500` |
| `--context-lines` | ä¸Šä¸‹æ–‡æ³¨å…¥è¡Œæ•° | `5` |
| `--workers` | å¹¶å‘çº¿ç¨‹æ•° | `1` |
| `--start` / `--end` | ç« èŠ‚èŒƒå›´ | å…¨éƒ¨ |
| `--no-checkpoint` | ç¦ç”¨æ–­ç‚¹ç»­ä¼  | â€” |

---

## ğŸ“– æœ¯è¯­è¡¨æ ¼å¼

æœ¯è¯­è¡¨æ˜¯ä¸€ä¸ªç®€å•çš„ JSON æ–‡ä»¶ï¼Œé”®ä¸ºæ—¥æ–‡åŸæ–‡ï¼Œå€¼ä¸ºä¸­æ–‡ç¿»è¯‘ï¼š

```json
{
  "å…ˆè¼©": "å­¦å§",
  "ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³": "è¿·å®«",
  "ãƒãƒŠ": "é­”åŠ›ç´ ",
  "ã‚¹ã‚­ãƒ«": "æŠ€èƒ½"
}
```

ç¿»è¯‘æ—¶ä¼šå°†æœ¯è¯­è¡¨æ³¨å…¥ System Promptï¼Œç¡®ä¿æ¨¡å‹ä¸¥æ ¼éµå®ˆè¯‘åã€‚

å‚è§ [examples/glossary_example.json](examples/glossary_example.json)ã€‚

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
novel-translator/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ novel_translator/
â”‚       â”œâ”€â”€ __init__.py      # åŒ…ç‰ˆæœ¬
â”‚       â”œâ”€â”€ __main__.py      # python -m å…¥å£
â”‚       â”œâ”€â”€ cli.py           # å‘½ä»¤è¡Œæ¥å£
â”‚       â”œâ”€â”€ engine.py        # ç¿»è¯‘å¼•æ“æ ¸å¿ƒ
â”‚       â””â”€â”€ gui.py           # Flet å›¾å½¢ç•Œé¢
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ glossary_example.json
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ launcher.py              # PyInstaller æ‰“åŒ…å…¥å£
â”œâ”€â”€ novel_translator.spec    # PyInstaller é…ç½®
â”œâ”€â”€ build.bat                # Windows ä¸€é”®æ„å»ºè„šæœ¬
â”œâ”€â”€ LICENSE
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## âš™ï¸ ç¿»è¯‘å¼•æ“ç‰¹æ€§

### æ¨¡å‹ç±»å‹è‡ªåŠ¨æ£€æµ‹

å¼•æ“æ”¯æŒ **Chat** å’Œ **Completion** ä¸¤ç§ API åç«¯ï¼š

- **Chat æ¨¡å‹**ï¼ˆDeepSeek / GPT / Qwen / Claudeï¼‰ï¼šä½¿ç”¨ `chat.completions` API + System Prompt
- **Completion æ¨¡å‹**ï¼ˆbase æ¨¡å‹ï¼‰ï¼šä½¿ç”¨ `completions` API + Few-shot Prompt

æ£€æµ‹ä¼˜å…ˆçº§ï¼šç”¨æˆ·æŒ‡å®š â†’ æ¨¡å‹åå…³é”®è¯åŒ¹é… â†’ API æ¢æµ‹

### ä¸Šä¸‹æ–‡æ³¨å…¥

å°†ä¸Šä¸€æ®µç¿»è¯‘ç»“æœçš„æœ€å N è¡Œæ³¨å…¥åˆ°ä¸‹ä¸€æ®µçš„è¯·æ±‚ä¸­ï¼Œå¸®åŠ©æ¨¡å‹ä¿æŒäººåã€ç§°è°“çš„å‰åä¸€è‡´ã€‚

- ä¸²è¡Œæ¨¡å¼ï¼šæ¯ä¸ª chunk å¸¦ä¸Šå‰ä¸€ä¸ª chunk çš„ç¿»è¯‘å°¾éƒ¨
- å¹¶å‘æ¨¡å¼ï¼šæ¯ä¸ªæ‰¹æ¬¡çš„é¦–ä¸ª chunk å¸¦ä¸Šä¸Šæ‰¹æœ«å°¾çš„ç¿»è¯‘å°¾éƒ¨

### ç¿»è¯‘ä¿®å¤

1. **è´¨é‡æ‰«æ**ï¼šåœ¨æ–­ç‚¹æ–‡ä»¶ä¸­æœç´¢æŒ‡å®šå…³é”®è¯ï¼ˆå¦‚ "å‰è¾ˆ" "ç±³å¨…"ï¼‰ï¼Œå®šä½é—®é¢˜ç« èŠ‚
---

## ğŸ“¦ æ„å»ºå‘è¡ŒåŒ…

å¦‚éœ€è‡ªè¡Œæ„å»º Windows å¯æ‰§è¡Œç¨‹åºï¼š

```bash
# æ–¹å¼ä¸€ï¼šè¿è¡Œæ„å»ºè„šæœ¬
build.bat

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ
pip install pyinstaller
pyinstaller novel_translator.spec --noconfirm
```

æ„å»ºå®Œæˆåï¼Œå‘è¡Œæ–‡ä»¶ä½äº `dist/NovelTranslator/` ç›®å½•ã€‚å°†è¯¥æ–‡ä»¶å¤¹å‹ç¼©ä¸º zip å³å¯åˆ†å‘ã€‚

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)
